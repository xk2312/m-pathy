@import "tailwindcss";
@import "../styles/design.tokens.css";  /* ⬅︎ Urgroßeltern: zentrale Tokens */

/* Chat-typografische Erweiterung (für .md-prose) */
@import "../styles/chat-prose.css";
/* syntax theme for rehype-highlight */
@import "highlight.js/styles/github-dark.css";
/* ============================================================
   Chat-Typografie – Symbolmagie für MessageBody
   ============================================================ */

.m-typo {
  font-feature-settings: "liga" 1, "calt" 1;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  color: var(--col-fg-primary, #e6f0f3);
}

.m-typo p + p {
  margin-top: 0.55rem;
}

.m-typo ul,
.m-typo ol {
  margin: 0.5rem 0 0.5rem 1.2rem;
}

.m-typo code {
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
  font-size: 0.92em;
}

/* Rollen-spezifische Nuancen */
.m-typo-user {
  text-align: right;
  letter-spacing: 0.01em;
}

.m-typo-assistant {
  text-align: left;
}

/* sanfte Betonung */
.m-typo-user strong,
.m-typo-assistant strong {
  font-weight: 550;
}

/* Auswahl-Highlight */
.m-typo ::selection {
  background: rgba(34,211,238,0.26);
  color: #e7f6ff;
}

/* ── Base Reset ───────────────────────────────────────────── */
/* GLOBAL RESET – cleaned (preserves Tailwind margins) */
* {
  box-sizing: border-box;
  padding: 0;
}

/* Remove only browser default margin */
body {
  margin: 0;
}

/* Wichtig: Scroll wieder erlauben + Selektieren aktivieren */
html, body {
  width: 100%;
  /* ⬇︎ Hart auf Viewport-Höhe + KEIN globales Scrollen */
  height: 100dvh;            /* statt nur min-height */
  color: #fff;
  background:
    radial-gradient(circle at center, #0f0f0f, #000000);
  user-select: text;
  -webkit-user-select: text;
  touch-action: pan-y pinch-zoom;
}

/* Scroll-Freigabe nur wenn explizit gesetzt */
html.enable-scroll {
  overflow-y: auto !important;
}
/* ⬇︎ Beim Entsperren auch overscroll wieder erlauben (hebt body:contain auf) */
html.enable-scroll,
html.enable-scroll body {
  overscroll-behavior-y: auto !important;
}

html {
  overflow-x: hidden;
  overflow-y: hidden;        /* ⬅︎ Body/Seite scrollt NICHT */
}

body {
  background-color: #000;
  overscroll-behavior-y: contain; /* optional restriktiver */
  -webkit-tap-highlight-color: transparent;
  /* Globale Navi-Reserve entfernt – Bühne liegt direkt unter der Navi */
}



/* Canvas bleibt block-level */
canvas { display: block; }

/* ── Legacy Bloom-IDs: beibehalten ───────────────────────── */
#bloom-wrapper { position: relative; width: 100%; min-height: 100dvh; }
#bloom-core {
  position: absolute; top: 50%; left: 50%;
  transform: translate(-50%, -50%);
  width: 160px; height: 160px; border-radius: 50%;
  background: rgba(112,224,255,0.05);
  transition: all 0.3s ease; z-index: 2;
}
#bloom-core.hover { box-shadow: 0 0 60px rgba(112,224,255,0.4); }
.stage-2 { background: black; transition: background 1s ease; }

/* ── Keyframes (global, stabil) ──────────────────────────── */
@keyframes zenithSweep {
  from { transform: translateX(-120%); }
  to   { transform: translateX(120%); }
}
@keyframes zenithExit {
  0%   { opacity:1; transform: translateX(-50%) translateY(0) scale(1); filter: blur(0); }
  40%  { opacity:.9; transform: translateX(-50%) translateY(-3vh) scale(1.04); }
  100% { opacity:0; transform: translateX(-50%) translateY(-20vh) scale(.9); filter: blur(6px); }
}
@keyframes zenithDust {
  0%   { opacity:.9; transform: translate(0,0) scale(1); filter: blur(0); }
  100% { opacity:0; transform: translate(var(--dx), var(--dy)) scale(0.3); filter: blur(2px); }
}
@media (prefers-reduced-motion: reduce){
  * { animation: none !important; transition: none !important; transform: none !important; }
  html { scroll-behavior: auto !important; } /* kein smooth scroll bei RRM */
}
/* ── Chat-Farben (wie bei dir) ───────────────────────────── */
.message { color: #fff; }
.message.user { color: #0ff; }
.message.assistant { color: #ffd700; }

/* ── Scrollbars (dezent) ─────────────────────────────────── */
section::-webkit-scrollbar { width: 8px; }
section::-webkit-scrollbar-track { background: transparent; }
section::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.1); border-radius: 4px; }
section::-webkit-scrollbar-thumb:hover { background: rgba(255,255,255,0.2); }

/* --- KPI scope: leichte Entzerrung der Tabellenzeilen --- */
.kpi-scope {
  line-height: 1.35;               /* sanfte Auflockerung */
}
.kpi-scope table tr > th,
.kpi-scope table tr > td {
  padding-block: 6px;              /* etwas Luft oben/unten */
}


/* ── Hilfsklassen ────────────────────────────────────────── */
/* Falls du lokal selektieren verbieten willst: */
.no-copy { user-select: none !important; -webkit-user-select: none !important; }

/* z-Layer Konvention (für Overlays/Drawer/FAB) */
:root {
  --dock-h: 60px; /* fallback dock height */
  /* --- Safe-area Desktop Default --- */
  --safe-bottom: 0px; /* Desktop-Fallback; @supports block aktualisiert diesen Wert */

  /* Navigation layer (zwischen Base und Overlays/Dock) */
  --z-nav: 40;
}



/* Wenn der Browser safe-area kennt, mappe sie auf die Variable. */
@supports (padding: max(0px)) {
  :root {
    --safe-bottom: env(safe-area-inset-bottom, 0px);
  }
}


/* ======================================================================
   Markdown typographic defaults (greifen auf <div class="markdown">…)
   ====================================================================== */

.markdown {
  line-height: 1.6;
  word-break: break-word;
  color: inherit;           /* erbt Bubble-Farbe */
}

/* Headings */
.markdown h1,
.markdown h2,
.markdown h3 {
  margin: 1.2em 0 0.6em;
  font-weight: 700;
  line-height: 1.25;
}
.markdown h1 { font-size: clamp(1.40rem, 1.10rem + 1vw, 1.90rem); }
.markdown h2 { font-size: clamp(1.25rem, 1.00rem + 0.7vw, 1.60rem); }
.markdown h3 { font-size: clamp(1.10rem, 0.95rem + 0.5vw, 1.30rem); }

/* Paragraphs */
.markdown p { margin: 0.75em 0; }

/* Lists */
.markdown ul,
.markdown ol {
  display: block;           /* Schutz gegen Resets */
  list-style-position: outside;
  margin: 0.75em 0 0.75em 1.25em;
  padding: 0;
}
.markdown li { display: list-item; margin: 0.25em 0; }
.markdown ul  { list-style-type: disc; }
.markdown ul ul { margin-left: 1.1em; list-style-type: circle; }
.markdown ol  { list-style-type: decimal; }

/* Inline code */
.markdown code {
  font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
  font-size: 0.9em;
  background: rgba(255,255,255,0.06);
  border: 1px solid rgba(255,255,255,0.08);
  padding: 0.1em 0.35em;
  border-radius: 0.35em;
}

/* Links (optional) */
.markdown a { text-decoration: underline; color: inherit; }

/* === MOBILE SCOPE ===================================================== */
@media (max-width: 768px), (pointer: coarse) {
  :root {
    /* Viewport + Safe Area (werden später via JS aktualisiert) */
    --vh: 1vh;                         /* Fallback, wird via visualViewport gesetzt */
    --safe-bottom: env(safe-area-inset-bottom, 0px);

    /* Header-Höhen */
    --header-h-idle: 96px;
    --header-h-shrink: 72px;
    --header-h-typing: 0px;
    --header-h: var(--header-h-idle);  /* aktueller Wert (wird getoggelt) */

    /* Dock / Prompt Caps */
    --dock-cap-portrait: 30vh;
    --dock-cap-landscape: 22vh;
    --dock-cap: var(--dock-cap-portrait);

    /* Spacings */
    --header-offset: 16px;             /* Säule-Offset unter Header */
  }

  /* Motion budget mobil (respect RRM) */
  @media (prefers-reduced-motion: no-preference) {
    .mob-transition {
      transition: height .16s ease, padding .16s ease, transform .16s ease, opacity .16s ease;
    }
  }
}
/* === Mobile MessageInput Toolbar Toggle ================================ */
@media (max-width: 768px), (pointer: coarse) {
  /* Plus-Button mobil zeigen */
  .mi-plus-btn { display: inline-flex; }

  /* Rechte Icon-Leiste mobil ausblenden (nur die Toolbar, nicht den Senden-Button) */
  .m-inputbar__actionsRight [role="toolbar"] {
    display: none !important;
  }

  /* Tool-Kacheln im Popover: große Touch-Ziele */
  .mi-tool {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    min-height: 44px;
    border-radius: 10px;
    border: 1px solid #314156;
    background: #0b1220;
    color: #e6f0f3;
    font-weight: 700;
  }
}

/* Desktop: Plus-Button ausblenden */
@media (min-width: 769px) and (pointer: fine) {
  .mi-plus-btn { display: none !important; }
}
/* === A11y Focus Enhancements =========================================== */
:focus-visible {
  outline: 2px solid rgba(34,211,238,0.55);
  outline-offset: 2px;
}
/* (removed duplicate :root --dock-h; now defined in main :root) */
@media (max-width: 768px){
  html, body { overflow-x: hidden; }
}


/* gezielt den Chat-Scroller dunkler stylen */
div[data-convo="1"]::-webkit-scrollbar-track { background: transparent; }
@supports (scrollbar-color: auto) {
  div[data-convo="1"] { scrollbar-color: rgba(255,255,255,0.25) transparent; }
}

/* Golden Prompt Layout */
.gold-tools{
  display:flex; gap:8px; justify-content:flex-start;
  width:min(920px, 100%); margin:0 auto 6px auto;
}
.gt{
  height:32px; min-width:32px; border-radius:10px;
  border:1px solid rgba(255,255,255,0.12);
  background: rgba(255,255,255,0.04);
  color: inherit;
}
.gold-prompt-wrap{
  display:grid; grid-template-columns: 1fr auto; gap:10px; align-items:stretch;
  width:min(920px, calc(100vw - env(safe-area-inset-left) - env(safe-area-inset-right) - 16px));
  margin:0 auto;
}
.gold-textarea{
  width:100%; min-height:44px; max-height:var(--dock-cap); resize:none;
  border-radius:12px; padding:10px 12px; line-height:1.5;
  border:1px solid rgba(255,255,255,0.12);
  background: rgba(255,255,255,0.04); color: inherit; outline:none;
}
.gold-send{
  min-height:44px; align-self:stretch; border-radius:12px;
  padding:0 14px; font-weight:700; cursor:pointer;
  border:1px solid rgba(34,211,238,0.28); background: rgba(34,211,238,0.12); color: inherit;
}

/* Inertias & Ripple (wie besprochen) */
.gold-dock.send-ripple{
  animation: gp-inertia 320ms cubic-bezier(.2,.6,.2,1) 1,
             gp-ripple 680ms ease-out 1;
}
@keyframes gp-inertia{
  0%{ transform: translateY(0); } 55%{ transform: translateY(-3px); } 100%{ transform: translateY(0); }
}
@keyframes gp-ripple{
  0%{ box-shadow: 0 -6px 24px rgba(0,0,0,.35), inset 0 0 0 0 rgba(34,211,238,0); }
  15%{ box-shadow: 0 -6px 24px rgba(0,0,0,.35), inset 0 0 0 1000px rgba(34,211,238,0.08); }
  100%{ box-shadow: 0 -6px 24px rgba(0,0,0,.35), inset 0 0 0 0 rgba(34,211,238,0); }
}
/* Reserviere immer Fußraum im rechten Scroll-Container 
div[data-convo="1"] {
  padding-bottom: calc(var(--dock-h, 60px) + var(--safe-bottom, 0px) + 24px);
}
*/
/* Dock zuverlässig an den Viewport pinnen (Desktop & Mobile) – Single source */
#m-input-dock {
  position: fixed;
  left: 0;
  right: 0;
  bottom: var(--safe-bottom, 0px);
  z-index: var(--z-overlay, 90);
}

/* ---------- Markdown scope ---------- */
.md {
  /* sorgt für angenehme Breite im Bubble-Layout, ohne Seitenlayout zu verändern */
  word-wrap: break-word;
  overflow-wrap: anywhere;
  line-height: 1.55;
}

/* ---------- Tables ---------- */
/* Apply to BOTH .md and .markdown (alias) */
.md .md-table-wrap,
.markdown .md-table-wrap {
  overflow-x: auto;
  margin: 10px 0 14px;
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,0.10);
  background: rgba(255,255,255,0.03);
  box-shadow: 0 8px 24px rgba(0,0,0,0.25);
}

.md table,
.markdown table {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
}

.md th, .md td,
.markdown th, .markdown td {
  padding: 10px 12px;
  text-align: left;
  border-bottom: 1px solid rgba(255,255,255,0.08);
  vertical-align: top;
}

.md thead th,
.markdown thead th {
  font-weight: 700;
  background: rgba(255,255,255,0.04);
  position: sticky;
  top: 0;
  z-index: 1;
}

.md tbody tr:nth-child(even) td,
.markdown tbody tr:nth-child(even) td {
  background: rgba(255,255,255,0.02);
}

/* runde Ecken an der Außenkante */
.md table tr:first-child th:first-child,
.markdown table tr:first-child th:first-child { border-top-left-radius: 10px; }

.md table tr:first-child th:last-child,
.markdown table tr:first-child th:last-child  { border-top-right-radius: 10px; }

.md table tr:last-child  td:first-child,
.markdown table tr:last-child  td:first-child { border-bottom-left-radius: 10px; }

.md table tr:last-child  td:last-child,
.markdown table tr:last-child  td:last-child  { border-bottom-right-radius: 10px; }

/* ---------- Code: fenced blocks ---------- */
.md .md-code {
  margin: 12px 0;
  padding: 14px 16px;
  border-radius: 12px;
  /* Farbe vom Bubble-Kontext übernehmen */
  color: inherit;
  background: rgba(15,23,42,0.66); /* glassy slate */
  background-clip: padding-box;
  border: 1px solid rgba(255,255,255,0.10);
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  box-shadow: 0 10px 30px rgba(0,0,0,0.35);
}

.md .md-code > code {
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
  font-size: 14px;
  line-height: 1.6;
  tab-size: 2;
  white-space: pre;
  color: inherit; /* Syntax-Theme färbt Tokens; Grundfarbe bleibt vom Bubble-Kontext */
}

/* ---------- Code: inline ---------- */
.md .md-inline {
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
  font-size: 0.92em;
  background: rgba(255,255,255,0.08);
  border: 1px solid rgba(255,255,255,0.12);
  border-radius: 8px;
  padding: 0.1em 0.45em;
  white-space: break-spaces; /* wrappt in Bubbles elegant */
}

/* ---------- Links im Markdown ---------- */
.md a {
  color: #76eaff;
  text-decoration: none;
  border-bottom: 1px solid rgba(118,234,255,0.35);
}
.md a:hover { filter: brightness(1.1); }

/* ---------- Lists spacing ---------- */
.md ul, .md ol { padding-left: 1.25em; margin: 8px 0 12px; }
.md li + li    { margin-top: 4px; }

/* === GPTM: Table Mobile Fallback (no wrapper needed) === */
/* On narrow screens, allow inline scroll for tables that were not wrapped. */
@media (max-width: 768px) {
  .md table,
  .markdown table {
    display: block;              /* enable overflow on the element itself */
    overflow-x: auto;            /* horizontal scroll */
    -webkit-overflow-scrolling: touch;
    width: 100%;
  }

  /* keep cells readable when narrow; you may remove if wrapping is preferred */
   .md table th, .md table td,
  .markdown table th, .markdown table td {
    white-space: nowrap;         /* prevent ugly multi-line cell breaks */
  }
}
/* =====================================================================
   ⬇️ GalaxyBuilder Patch · KPI Centering & Row Density (v1.1)
   Purpose: Zentriert Elterncontainer & lockert KPI-Zeilen spacing
   ===================================================================== */

/* Eltern-Pattern: erzwingt Mitte & Innenabstand über Tokens */
.page-center {
  box-sizing: border-box;
  width: 100%;
  max-width: var(--page-inner-max);
  margin-inline: auto;
  padding-inline: var(--page-pad-inline);
}

/* KPI-scope: sanft lockerere Zeilen, ohne globale Nebenwirkung */
.kpi-scope {
  line-height: 1.35;
}

.kpi-scope table tr > th,
.kpi-scope table tr > td {
  padding-block: 6px; /* leichtes vertikales Luftpolster */
}
/* --- KPI scope: header spacing + tabs breathing room --- */
.kpi-scope thead th {
  line-height: 1.45;
  padding-block: 10px;     /* Kopfzeilen spürbar luftiger */
}

.kpi-scope [role="tablist"] {
  margin-block: 10px;      /* Abstand oberhalb/unterhalb der Tabs */
}

.kpi-scope [role="tab"] {
  padding-block: 10px;     /* Tab-Schaltflächen mit vertikaler Luft */
}
/* --- KPI scope: guard against 100vw/overflow in children --- */
.kpi-scope > * {
  margin-left: auto;
  margin-right: auto;
  max-width: 100%;    /* keine übergroße Kindbreite */
}
/* --- KPI scope: fine-tune tabs + first column padding --- */
.kpi-scope [role="tablist"] {
  margin-top: 5px;
  margin-bottom: 5px;
}

.kpi-scope [role="tab"] {
  padding-top: 5px;
  padding-bottom: 5px;
}

.kpi-scope table tr > *:first-child {
  padding-left: 5px;
}
/* --- KPI scope: column symmetry + label indentation --- */

/* gleiche Innenabstände links und rechts in allen Zellen */
.kpi-scope table tr > *:first-child {
  padding-left: 5px;
}
.kpi-scope table tr > *:last-child {
  padding-right: 5px;
}

/* Überschriften und Abschnittstitel (Core, Core · Tabelle usw.) leicht eingerückt */
.kpi-scope h2,
.kpi-scope h3 {
  padding-left: 10px;
}

/* Falls "Core · ..." Text in custom Spans/Divs sitzt */
.kpi-scope [class*="Core"],
.kpi-scope [class*="core"] {
  padding-left: 10px;
}
/* --- KPI scope: button inner padding adjustment --- */
.kpi-scope button {
  padding-left: 20px !important;  /* vorher px-4 → 16px, jetzt +4px ≈ +5px visuell */
  padding-right: 20px !important;
}
/* KPI scope: enforce pointer on all actionable controls */
.kpi-scope button,
.kpi-scope [role="tab"],
.kpi-scope [role="button"],
.kpi-scope a {
  cursor: pointer;
}
/* Tabs dürfen immer Events bekommen und über Randkanten liegen */
.kpi-scope [role="tablist"] { pointer-events: auto; position: relative; z-index: 2; }
.kpi-scope [role="tab"] { pointer-events: auto; }
/* --- KPI scope: spacing between bullet and section title --- */
.kpi-scope h3 span.rounded-full {
  margin-right: 5px;
}

/* falls CardTitle andere Überschrift nutzt (Fallback) */
.kpi-scope .card-title span.rounded-full {
  margin-right: 5px;
}

/* =====================================================================
   End of Patch · Council13 verified · Triketon-2048 Seal
   ===================================================================== */
/* Point Zero · Desktop Center Guard for /subscription */
@media (min-width: 1024px) {
  .subscription-root {
    margin-inline: auto !important;
    max-width: var(--page-max) !important;
    display: block;
  }
}
.kpi-scope {
  width: 120%;
  max-width: none;
  margin-inline: -5%;
}
@media (min-width: 1024px) {
  .subscription-root {
    margin-inline: auto !important;
    max-width: var(--page-max) !important;
    display: block;
  }
}

/* KPI & PowerPrompts: mobil/tablet bündig, Desktop breiter */
.kpi-scope,
.pp-scope {                     /* < 1024px */
  width: 100%;
  max-width: 100%;
  margin-inline: 0;
}
@media (min-width: 1024px) {     /* ≥ 1024px */
  .kpi-scope,
  .pp-scope {
    width: 120%;
    max-width: none;
    margin-inline: -5%;
  }
}


/* =====================================================================
   Modes13 – Human Aura & Mode Selector
   (app/components/subscription/13modis.tsx)
   ===================================================================== */

.m-modes13 {
  position: relative;
  padding-top: 30px;
  padding-bottom: 30px;
}

.m-modes13-inner {
  max-width: var(--page-inner-max);
  margin-inline: auto;
  display: flex;
  flex-direction: column;
}

.m-modes13-header {
  max-width: 40rem;
}

.m-modes13-kicker {
  font-size: 0.75rem;
  letter-spacing: 0.12em;
  text-transform: uppercase;
  opacity: 0.7;
  margin-bottom: 0.35rem;
}

.m-modes13-title {
  font-size: clamp(1.6rem, 3vw, 2.1rem);
  line-height: 1.15;
  margin-bottom: 0.4rem;
}

.m-modes13-subtitle {
  font-size: 0.95rem;
  line-height: 1.5;
  max-width: 34rem;
  opacity: 0.85;
}

.m-modes13-main {
  display: flex;
  flex-direction: column;
  gap: 16px;
  margin-top: 10px; /* Header → Tabs ≈ 30 % des alten 32px-Abstands */
}
.m-modes13-left {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.m-modes13-selector {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.m-modes13-selector-label {
  font-size: 0.8rem;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  opacity: 0.7;
}

/* Tabs (Core / Intellect / Creator / Heart / Spirit) */
.m-modes13-tabs {
  display: flex;
  flex-wrap: nowrap; /* immer einzeilig, Desktop fix */
  gap: 8px;          /* etwas enger, damit alle reinpassen */
  padding-bottom: 6px;
  border-bottom: 1px solid hsl(0 0% 100% / 0.08);
  overflow-x: auto;
  scrollbar-width: none; /* Firefox */
}

.m-modes13-tabs::-webkit-scrollbar {
  display: none; /* WebKit */
}

.m-modes13-tab {
  position: relative;
  padding: 6px 10px 10px;
  font-size: 0.75rem;
  letter-spacing: 0.16em;
  text-transform: uppercase;
  opacity: 0.72;
  border: none;
  background: transparent;
  cursor: pointer;
  white-space: nowrap;
  outline: none;
  transition:
    opacity var(--modes-select-transition),
    transform 120ms ease-out;
}

.m-modes13-tab:hover,
.m-modes13-tab:focus-visible {
  opacity: 0.95;
  transform: translateY(-1px);
}

/* Cyan-Linie mit Glow für active */
.m-modes13-tab::after {
  content: "";
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;
  height: 2px;
  border-radius: 999px;
  background:
    radial-gradient(
      ellipse at center,
      hsl(190 100% 70% / 0.9) 0%,
      hsl(190 100% 70% / 0.0) 70%
    );
  opacity: 0;
  transform: scaleX(0.7);
  filter: blur(1.5px);
  transition:
    opacity 160ms ease-out,
    transform 160ms ease-out;
}

.m-modes13-tab--active {
  opacity: 1;
}

.m-modes13-tab--active::after {
  opacity: 1;
  transform: scaleX(1);
}


.m-modes13-groups {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.m-modes13-group {
  padding: 4px 0;
  border-radius: 12px;
}

.m-modes13-group-modes {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

/* Mode-Pills */

.m-modes13-pill {
  position: relative;
  display: inline-flex;
  flex-direction: column;
  align-items: flex-start;
  justify-content: center;
  border-radius: var(--modes-menu-item-radius);
  padding-block: var(--modes-menu-item-pad-y);
  padding-inline: var(--modes-menu-item-pad-x);
  border: 1px solid hsl(0 0% 100% / 0.16);
  background: hsl(0 0% 100% / 0.02);
  color: hsl(0 0% 96%);
  cursor: pointer;
  outline: none;
  gap: 2px;
  transition:
    background-color var(--modes-select-transition),
    border-color var(--modes-select-transition),
    transform 120ms ease-out,
    box-shadow 160ms ease-out;
}

.m-modes13-pill:hover,
.m-modes13-pill:focus-visible {
  background: hsl(0 0% 100% / 0.06);
  border-color: hsl(0 0% 100% / 0.26);
  transform: translateY(-1px);
  box-shadow: 0 6px 16px hsl(0 0% 0% / 0.35);
}

.m-modes13-pill--active {
  background: var(--modes-menu-item-bg-hover);
  border-color: hsl(0 0% 100% / 0.35);
  box-shadow: 0 0 0 1px hsl(0 0% 100% / 0.4);
}

.m-modes13-pill-name {
  font-size: 0.7rem;
  letter-spacing: 0.13em;
  text-transform: uppercase;
  opacity: 0.85;
}

.m-modes13-pill-label {
  font-size: 0.85rem;
  opacity: 0.92;
}

/* Figur + Aura */

.m-modes13-figure-shell {
  position: relative;
  width: 100%;
  max-width: var(--modes-figure-max-width-sm);
  margin-inline: auto;
}

.m-modes13-figure {
  position: relative;
  z-index: 1;
  pointer-events: none;
}

.m-modes13-figure img {
  display: block;
  width: 100%;
  height: auto;
  mix-blend-mode: screen;
  filter: drop-shadow(0 0 32px hsl(0 0% 0% / 0.9));
  opacity: calc(0.7 + var(--modes-current-halo-strength, 0.6) * 0.3);
  transition:
    opacity 200ms cubic-bezier(0.33, 0, 0.2, 1),
    filter 200ms cubic-bezier(0.33, 0, 0.2, 1);
}

.m-modes13-aura {
  position: absolute;
  inset: -10% -10% -20%;
  pointer-events: none;
  filter: blur(var(--modes-aura-blur));
  opacity: 1;
}

.m-modes13-aura-layer {
  position: absolute;
  inset: 0;
  border-radius: 999px;
  background: radial-gradient(circle, currentColor 0%, transparent 65%);
  opacity: calc(var(--modes-current-aura-intensity, 0.7) * 0.6);
  transform-origin: center;
  animation: modes-aura-pulse var(--modes-current-pulse-duration, var(--modes-pulse-duration-mid)) ease-in-out infinite alternate;
}

.m-modes13-aura-layer-2 {
  transform: scale(1.15);
  opacity: calc(var(--modes-current-aura-intensity, 0.7) * 0.45);
}

.m-modes13-aura-layer-3 {
  transform: scale(1.32);
  opacity: calc(var(--modes-current-aura-intensity, 0.7) * 0.32);
}

/* Aura-Farbe nach Gruppe */

.m-modes13[data-mode-group="core"] .m-modes13-aura {
  color: var(--modes-aura-core);
}

.m-modes13[data-mode-group="mind"] .m-modes13-aura {
  color: var(--modes-aura-intellect);
}

.m-modes13[data-mode-group="creator"] .m-modes13-aura {
  color: var(--modes-aura-intellect);
}

.m-modes13[data-mode-group="heart"] .m-modes13-aura {
  color: var(--modes-aura-heart);
}

.m-modes13[data-mode-group="spirit"] .m-modes13-aura {
  color: var(--modes-aura-spirit);
}

/* Beschreibung / Output */

.m-modes13-description {
  max-width: 28rem;
  margin-top: 16px;
  margin-bottom: 0; /* globalen buffer-fluid-Margin für dieses Article neutralisieren */
}

.m-modes13-description-title {
  font-size: 0.9rem;
  letter-spacing: 0.12em;
  text-transform: uppercase;
  opacity: 0.85;
  margin-bottom: 0.3rem;
}

.m-modes13-description-label {
  font-size: var(--modes-label-font-size);
  font-weight: 500;
  margin-bottom: 0.25rem;
}

.m-modes13-description-body {
  font-size: var(--modes-desc-font-size);
  line-height: var(--modes-desc-line-height);
  color: var(--modes-desc-color);
}

/* Per-Mode Mapping → current intensity / pulse / halo */

.m-modes13[data-mode="flow"] {
  --modes-current-aura-intensity: var(--mode-flow-aura-intensity);
  --modes-current-pulse-duration: var(--mode-flow-pulse-duration);
  --modes-current-halo-strength:  var(--mode-flow-halo-strength);
}

.m-modes13[data-mode="onboarding"] {
  --modes-current-aura-intensity: var(--mode-onboarding-aura-intensity);
  --modes-current-pulse-duration: var(--mode-onboarding-pulse-duration);
  --modes-current-halo-strength:  var(--mode-onboarding-halo-strength);
}

.m-modes13[data-mode="build"] {
  --modes-current-aura-intensity: var(--mode-build-aura-intensity);
  --modes-current-pulse-duration: var(--mode-build-pulse-duration);
  --modes-current-halo-strength:  var(--mode-build-halo-strength);
}

.m-modes13[data-mode="research"] {
  --modes-current-aura-intensity: var(--mode-research-aura-intensity);
  --modes-current-pulse-duration: var(--mode-research-pulse-duration);
  --modes-current-halo-strength:  var(--mode-research-halo-strength);
}

.m-modes13[data-mode="truth"] {
  --modes-current-aura-intensity: var(--mode-truth-aura-intensity);
  --modes-current-pulse-duration: var(--mode-truth-pulse-duration);
  --modes-current-halo-strength:  var(--mode-truth-halo-strength);
}

.m-modes13[data-mode="wisdom"] {
  --modes-current-aura-intensity: var(--mode-wisdom-aura-intensity);
  --modes-current-pulse-duration: var(--mode-wisdom-pulse-duration);
  --modes-current-halo-strength:  var(--mode-wisdom-halo-strength);
}

.m-modes13[data-mode="play"] {
  --modes-current-aura-intensity: var(--mode-play-aura-intensity);
  --modes-current-pulse-duration: var(--mode-play-pulse-duration);
  --modes-current-halo-strength:  var(--mode-play-halo-strength);
}

.m-modes13[data-mode="vision"] {
  --modes-current-aura-intensity: var(--mode-vision-aura-intensity);
  --modes-current-pulse-duration: var(--mode-vision-pulse-duration);
  --modes-current-halo-strength:  var(--mode-vision-halo-strength);
}

.m-modes13[data-mode="oracle"] {
  --modes-current-aura-intensity: var(--mode-oracle-aura-intensity);
  --modes-current-pulse-duration: var(--mode-oracle-pulse-duration);
  --modes-current-halo-strength:  var(--mode-oracle-halo-strength);
}

.m-modes13[data-mode="empathy"] {
  --modes-current-aura-intensity: var(--mode-empathy-aura-intensity);
  --modes-current-pulse-duration: var(--mode-empathy-pulse-duration);
  --modes-current-halo-strength:  var(--mode-empathy-halo-strength);
}

.m-modes13[data-mode="love"] {
  --modes-current-aura-intensity: var(--mode-love-aura-intensity);
  --modes-current-pulse-duration: var(--mode-love-pulse-duration);
  --modes-current-halo-strength:  var(--mode-love-halo-strength);
}

.m-modes13[data-mode="joy"] {
  --modes-current-aura-intensity: var(--mode-joy-aura-intensity);
  --modes-current-pulse-duration: var(--mode-joy-pulse-duration);
  --modes-current-halo-strength:  var(--mode-joy-halo-strength);
}

.m-modes13[data-mode="calm"] {
  --modes-current-aura-intensity: var(--mode-peace-aura-intensity);
  --modes-current-pulse-duration: var(--modes-pulse-duration-slow);
  --modes-current-halo-strength:  0.85;
}

.m-modes13[data-mode="peace"] {
  --modes-current-aura-intensity: var(--mode-peace-aura-intensity);
  --modes-current-pulse-duration: var(--mode-peace-pulse-duration);
  --modes-current-halo-strength:  var(--mode-peace-halo-strength);
}

.m-modes13[data-mode="council"] {
  --modes-current-aura-intensity: var(--mode-council-aura-intensity);
  --modes-current-pulse-duration: var(--mode-council-pulse-duration);
  --modes-current-halo-strength:  var(--mode-council-halo-strength);
}

/* Aura-Pulse Animation (Transform + Opacity only) */

@keyframes modes-aura-pulse {
  from {
    opacity: calc(var(--modes-current-aura-intensity, 0.7) * 0.5);
    transform: scale(0.96);
  }
  to {
    opacity: var(--modes-current-aura-intensity, 0.7);
    transform: scale(1.04);
  }
}

/* Layout: Desktop – Figur & Panel nebeneinander */

@media (min-width: 1024px) {
  .m-modes13-main {
    flex-direction: row;
    align-items: center;
    gap: 48px;
  }

  .m-modes13-left {
    flex: 1 1 0;
  }

  .m-modes13-figure-shell {
    flex: 1 1 0;
    max-width: var(--modes-figure-max-width);
  }

  .m-modes13-description {
    margin-top: 12px;
  }
}


/* Reduced Motion: alle Animationen stark eindämpfen */

@media (prefers-reduced-motion: reduce) {
  .m-modes13 *,
  .m-modes13 *::before,
  .m-modes13 *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0ms !important;
  }
}
/* Subscription · Card-Inner Layout */
.subscription-card-inner {
  padding: var(--sub-card-inner-padding, 13px);
}
/* ─────────────────────────────────────────────
   FOOTER — LAYOUT + STRUCTURE (Spoty Refined)
   ───────────────────────────────────────────── */
.footer-root {
  width: 100%;
  padding: var(--footer-pad-y) var(--footer-pad-x);
  background: var(--footer-bg);
  border-top: 1px solid var(--footer-border);
  backdrop-filter: blur(14px);
}

.footer-inner {
  max-width: var(--page-inner-max);
  margin-inline: auto;

  display: grid;
  gap: var(--footer-col-gap);
  grid-template-columns: repeat(auto-fit, minmax(var(--footer-col-min), 1fr));
}

.footer-motto {
  font-size: var(--footer-motto-size);
  font-weight: var(--footer-motto-weight);
  line-height: 1.35;
  color: var(--footer-strong);
  margin-bottom: var(--footer-row-gap);
}

.footer-company {
  font-size: var(--footer-text-size);
  line-height: 1.45;
  opacity: 0.85;
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.footer-email {
  margin-top: var(--footer-row-gap);
  font-size: var(--footer-text-size);
  color: var(--footer-strong);
  opacity: 0.85;
  text-decoration: none;
}
.footer-email:hover {
  opacity: 1;
}

.footer-links {
  display: flex;
  flex-direction: column;
  gap: 8px;
}
.footer-links a {
  font-size: var(--footer-link-size);
  text-decoration: none;
  color: var(--footer-strong);
  opacity: 0.85;
  transition: opacity 0.2s ease;
}
.footer-links a:hover {
  opacity: 1;
}

.footer-pay {
  font-size: var(--footer-text-size);
  line-height: 1.45;
  color: var(--footer-muted);
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.footer-copy {
  grid-column: 1 / -1;
  margin-top: var(--footer-bottom-pad);
  padding-top: var(--footer-bottom-pad);
  text-align: center;
  border-top: 1px solid var(--footer-border);
  font-size: var(--footer-link-size);
  opacity: 0.6;
}
/* ============================================================
   Chat – Codeblöcke & Copy-Buttons
   ============================================================ */

.markdown code {
  padding: 0.12rem 0.32rem;
  border-radius: 0.45rem;
  background: rgba(15, 23, 42, 0.9);
  border: 1px solid rgba(148, 163, 184, 0.4);
  font-family:
    ui-monospace,
    SFMono-Regular,
    Menlo,
    Monaco,
    Consolas,
    "Liberation Mono",
    "Courier New",
    monospace;
  font-size: 0.85em;
}

/* Block-Code mit eigener Bühne */
.markdown .md-code-block {
  position: relative;
  margin: 1.4rem 0;
  padding: 0.9rem 0.95rem 0.95rem;
  border-radius: 0.9rem;
  background: rgba(15, 23, 42, 0.98);
  border: 1px solid rgba(148, 163, 184, 0.35);
  box-shadow: 0 18px 40px rgba(0, 0, 0, 0.55);
  overflow: hidden;
}

.markdown .md-code-block pre {
  margin: 0;
  max-width: 100%;
  overflow-x: auto;
  font-family:
    ui-monospace,
    SFMono-Regular,
    Menlo,
    Monaco,
    Consolas,
    "Liberation Mono",
    "Courier New",
    monospace;
  font-size: 0.85rem;
  line-height: 1.6;
  background: transparent;
}

.markdown .md-code-block code {
  background: transparent;
  padding: 0;
}

/* Copy-Button direkt am Codeblock */
.md-code-copy {
  position: absolute;
  top: 0.45rem;
  right: 0.55rem;
  padding: 0.15rem 0.6rem;
  border-radius: 999px;
  border: 1px solid rgba(148, 163, 184, 0.6);
  background: linear-gradient(
    135deg,
    rgba(15, 23, 42, 0.98),
    rgba(15, 23, 42, 0.92)
  );
  color: #e5f2ff;
  font-size: 0.72rem;
  letter-spacing: 0.05em;
  text-transform: uppercase;
  cursor: pointer;
  opacity: 0.85;
  transition:
    opacity 160ms ease-out,
    transform 160ms ease-out,
    border-color 160ms ease-out;
}

.md-code-copy:hover {
  opacity: 1;
  transform: translateY(-1px);
  border-color: rgba(56, 189, 248, 0.9);
}

.md-code-copy[data-copied="true"]::after {
  content: " Copied";
  margin-left: 0.35rem;
  opacity: 0.9;
}
